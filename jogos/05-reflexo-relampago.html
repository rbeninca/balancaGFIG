<!doctype html><html lang=pt-br><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>‚ö° Reflexo Rel√¢mpago</title><style>*{margin:0;padding:0;box-sizing:border-box}body{font-family:'Arial Black',sans-serif;background:#000;color:#fff;height:100vh;display:flex;align-items:center;justify-content:center;overflow:hidden}.container{width:90%;max-width:800px;text-align:center}h1{font-size:2.5rem;margin-bottom:20px;color:#ff0;text-shadow:0 0 20px #ff0}.game-area{background:rgba(255,255,255,.05);border-radius:20px;padding:40px;margin:20px 0;border:2px solid rgba(255,255,255,.2)}.signal-light{width:300px;height:300px;margin:30px auto;border-radius:50%;border:5px solid #333;display:flex;align-items:center;justify-content:center;font-size:4rem;font-weight:700;transition:all .1s;box-shadow:0 0 50px rgba(0,0,0,.5)}.signal-red{background:radial-gradient(circle,red,#800);box-shadow:0 0 100px red;animation:pulse-red 1s infinite}.signal-green{background:radial-gradient(circle,#0f0,#080);box-shadow:0 0 100px #0f0;animation:pulse-green .5s infinite}.signal-waiting{background:radial-gradient(circle,#333,#111)}@keyframes pulse-red{0%,100%{opacity:1}50%{opacity:.7}}@keyframes pulse-green{0%,100%{opacity:1}50%{opacity:.9}}.instruction{font-size:1.8rem;margin:20px 0;min-height:60px}.stats-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:15px;margin:30px 0}.stat-box{background:rgba(0,0,0,.5);padding:20px;border-radius:10px;border:1px solid rgba(255,255,255,.2)}.stat-label{font-size:.9rem;color:#aaa;margin-bottom:5px}.stat-value{font-size:2.5rem;font-weight:700}.reaction-time{font-size:3rem;color:#0ff;margin:20px 0}button{font-size:1.3rem;padding:15px 30px;background:#ff0;color:#000;border:none;border-radius:10px;cursor:pointer;margin:10px;font-weight:700;transition:all .3s}button:hover{background:#cc0;transform:scale(1.05)}button:disabled{background:#666;cursor:not-allowed}.debug{background:rgba(0,0,0,.7);padding:10px;border-radius:5px;font-size:.8rem;margin-top:20px}.history{display:flex;justify-content:center;gap:5px;margin:20px 0;flex-wrap:wrap}.history-item{padding:5px 10px;border-radius:5px;font-size:.9rem;background:rgba(255,255,255,.1)}.history-good{background:rgba(0,255,0,.3);border:1px solid #0f0}.history-ok{background:rgba(255,255,0,.3);border:1px solid #ff0}.history-bad{background:rgba(255,0,0,.3);border:1px solid red}</style><div class=container><h1>‚ö° REFLEXO REL√ÇMPAGO ‚ö°</h1><div class=game-area><div class="signal-light signal-waiting" id=signalLight><span id=lightText>AGUARDE</span></div><div class=instruction id=instruction>Aperte R√ÅPIDO quando ficar VERDE!</div><div class=reaction-time id=reactionTime>--- ms</div><div class=stats-grid><div class=stat-box><div class=stat-label>MELHOR TEMPO</div><div class=stat-value id=bestTime style=color:#0f0>-</div></div><div class=stat-box><div class=stat-label>M√âDIA</div><div class=stat-value id=avgTime style=color:#ff0>-</div></div><div class=stat-box><div class=stat-label>TENTATIVAS</div><div class=stat-value id=attempts style=color:#0ff>0</div></div></div><div class=history id=history></div></div><div><button onclick=startTest() id=startBtn>‚ñ∂Ô∏è Come√ßar Teste</button> <button onclick=resetGame()>üîÑ Resetar</button></div><div class=debug><div>For√ßa: <span id=debugForce>0</span> kg | Estado: <span id=debugState>Aguardando</span></div><div>Conex√£o: <span id=debugConnection>Verificando...</span></div></div></div><script>const GAME_CONFIG={minWaitTime:2e3,maxWaitTime:5e3,minForce:15,falseStartPenalty:500};let currentForce=0,isConnected=!1,gameState="waiting",greenTime=0,reactionTime=0,bestTime=1/0,attempts=0,reactionTimes=[],waitTimeout=null,hasPressed=!1;const signalLight=document.getElementById("signalLight"),lightText=document.getElementById("lightText"),instruction=document.getElementById("instruction"),reactionTimeDisplay=document.getElementById("reactionTime"),bestTimeDisplay=document.getElementById("bestTime"),avgTimeDisplay=document.getElementById("avgTime"),attemptsDisplay=document.getElementById("attempts"),historyContainer=document.getElementById("history"),startBtn=document.getElementById("startBtn"),debugForce=document.getElementById("debugForce"),debugState=document.getElementById("debugState"),debugConnection=document.getElementById("debugConnection");function startForcePolling(){setInterval(()=>{try{window.opener&&window.opener.sharedState?"number"==typeof window.opener.sharedState.forcaAtual&&(currentForce=window.opener.sharedState.forcaAtual/9.81,isConnected=!0,checkPress()):isConnected=!1}catch(t){isConnected=!1}updateDebug()},10)}function startTest(){if("waiting"!==gameState)return;gameState="red",hasPressed=!1,startBtn.disabled=!0,signalLight.className="signal-light signal-red",lightText.textContent="VERMELHO",instruction.textContent="üõë N√ÉO APERTE AINDA!",instruction.style.color="#ff0000";const t=Math.random()*(GAME_CONFIG.maxWaitTime-GAME_CONFIG.minWaitTime)+GAME_CONFIG.minWaitTime;waitTimeout=setTimeout(()=>{"red"===gameState&&(gameState="green",greenTime=Date.now(),signalLight.className="signal-light signal-green",lightText.textContent="VERDE!",instruction.textContent="‚ö° APERTE AGORA!",instruction.style.color="#00ff00")},t)}function checkPress(){if(!(hasPressed||currentForce<GAME_CONFIG.minForce))if(hasPressed=!0,"red"===gameState)clearTimeout(waitTimeout),reactionTime=-1,attempts++,signalLight.className="signal-light signal-waiting",lightText.textContent="FALSA!",instruction.textContent="‚ùå LARGADA FALSA! Apertou antes do verde!",instruction.style.color="#ff0000",reactionTimeDisplay.textContent="FALSA!",reactionTimeDisplay.style.color="#ff0000",addToHistory(-1),setTimeout(()=>{resetRound()},2e3);else if("green"===gameState){reactionTime=Date.now()-greenTime,attempts++,reactionTimes.push(reactionTime),reactionTime<bestTime&&(bestTime=reactionTime);let t="",e="";reactionTime<200?(t="üèÜ INCR√çVEL! Reflexo de ninja!",e="#00ff00"):reactionTime<300?(t="‚ö° EXCELENTE! Muito r√°pido!",e="#88ff00"):reactionTime<400?(t="üëç BOM! Tempo s√≥lido!",e="#ffff00"):reactionTime<500?(t="üòê OK... D√° pra melhorar!",e="#ff8800"):(t="üêå DEVAGAR! Acorda a√≠!",e="#ff0000"),signalLight.className="signal-light signal-waiting",lightText.textContent=reactionTime+"ms",instruction.textContent=t,instruction.style.color=e,reactionTimeDisplay.textContent=reactionTime+" ms",reactionTimeDisplay.style.color=e,addToHistory(reactionTime),updateStats(),setTimeout(()=>{resetRound()},2e3)}}function resetRound(){gameState="waiting",hasPressed=!1,startBtn.disabled=!1,signalLight.className="signal-light signal-waiting",lightText.textContent="AGUARDE",instruction.textContent="Aperte R√ÅPIDO quando ficar VERDE!",instruction.style.color="#ffffff"}function addToHistory(t){const e=document.createElement("div");for(e.className="history-item",-1===t?(e.textContent="FALSA",e.classList.add("history-bad")):t<300?(e.textContent=t+"ms",e.classList.add("history-good")):t<400?(e.textContent=t+"ms",e.classList.add("history-ok")):(e.textContent=t+"ms",e.classList.add("history-bad")),historyContainer.insertBefore(e,historyContainer.firstChild);historyContainer.children.length>10;)historyContainer.removeChild(historyContainer.lastChild)}function updateStats(){if(attemptsDisplay.textContent=attempts,bestTime<1/0&&(bestTimeDisplay.textContent=bestTime+"ms"),reactionTimes.length>0){const t=reactionTimes.reduce((t,e)=>t+e,0)/reactionTimes.length;avgTimeDisplay.textContent=Math.round(t)+"ms"}}function updateDebug(){debugForce.textContent=currentForce.toFixed(1),debugState.textContent=gameState,debugConnection.textContent=isConnected?"‚úÖ OK":"‚ùå OFF",debugConnection.style.color=isConnected?"#00ff00":"#ff0000"}function resetGame(){clearTimeout(waitTimeout),gameState="waiting",hasPressed=!1,attempts=0,bestTime=1/0,reactionTimes=[],reactionTime=0,resetRound(),bestTimeDisplay.textContent="-",avgTimeDisplay.textContent="-",attemptsDisplay.textContent="0",reactionTimeDisplay.textContent="--- ms",reactionTimeDisplay.style.color="#00ffff",historyContainer.innerHTML=""}document.addEventListener("DOMContentLoaded",()=>{console.log("‚ö° Reflexo Rel√¢mpago iniciado!"),startForcePolling()})</script>
