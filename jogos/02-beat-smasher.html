<!doctype html><html lang=pt-br><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>üéµ Beat Smasher</title><style>*{margin:0;padding:0;box-sizing:border-box}body{font-family:'Arial Black',sans-serif;background:linear-gradient(135deg,#667eea 0,#764ba2 100%);color:#fff;height:100vh;display:flex;flex-direction:column;align-items:center;justify-content:center;overflow:hidden}.container{text-align:center;width:90%;max-width:900px}h1{font-size:3rem;margin-bottom:20px;text-shadow:3px 3px 6px rgba(0,0,0,.5)}.game-area{background:rgba(0,0,0,.3);border-radius:20px;padding:30px;margin:20px 0}.beat-track{width:100%;height:80px;background:rgba(255,255,255,.1);border-radius:10px;position:relative;overflow:hidden;margin:20px 0}.beat-note{position:absolute;width:60px;height:60px;background:#f0f;border-radius:50%;top:10px;box-shadow:0 0 20px #f0f;transition:left 50ms linear}.hit-zone{position:absolute;left:50%;transform:translateX(-50%);width:100px;height:80px;border:3px dashed #0f0;border-radius:10px;background:rgba(0,255,0,.1)}.score-display{font-size:3rem;color:#ff0;margin:20px 0}.combo-display{font-size:2rem;color:#f0f;margin:10px 0}.status{font-size:1.5rem;margin:15px 0;min-height:40px}button{font-size:1.3rem;padding:15px 30px;background:#f0f;color:#fff;border:none;border-radius:10px;cursor:pointer;margin:10px;transition:all .3s}button:hover{background:#c0c;transform:scale(1.1)}.controls{margin:20px 0}.debug{background:rgba(0,0,0,.5);padding:10px;border-radius:5px;font-size:.9rem;margin-top:20px}@keyframes perfect-hit{0%{transform:scale(1)}50%{transform:scale(1.3);color:#0f0}100%{transform:scale(1)}}.perfect{animation:perfect-hit .5s ease-out}</style><div class=container><h1>üéµ BEAT SMASHER üéµ</h1><div class=game-area><div class=score-display>SCORE: <span id=score>0</span></div><div class=combo-display>COMBO: <span id=combo>0</span>x</div><div class=beat-track><div class=hit-zone></div><div class=beat-note id=beatNote></div></div><div class=status id=status>Aperte no ritmo! üé∂</div></div><div class=controls><button onclick=startGame()>‚ñ∂Ô∏è Iniciar</button> <button onclick=stopGame()>‚è∏Ô∏è Pausar</button> <button onclick=resetGame()>üîÑ Resetar</button></div><div class=debug><div>For√ßa: <span id=debugForce>0</span> kg | Meta: <span id=debugTarget>-</span> kg</div><div>Conex√£o: <span id=debugConnection>Verificando...</span></div><div>Game: <span id=debugGame>Pausado</span></div></div></div><script>const GAME_CONFIG={targetForce:30,tolerance:10,bpm:120,noteSpeed:2};let currentForce=0,isConnected=!1,isGameRunning=!1,score=0,combo=0,notePosition=0,lastHitTime=0;const scoreElement=document.getElementById("score"),comboElement=document.getElementById("combo"),statusElement=document.getElementById("status"),beatNote=document.getElementById("beatNote"),debugForce=document.getElementById("debugForce"),debugTarget=document.getElementById("debugTarget"),debugConnection=document.getElementById("debugConnection"),debugGame=document.getElementById("debugGame");function startForcePolling(){setInterval(()=>{try{window.opener&&window.opener.sharedState?"number"==typeof window.opener.sharedState.forcaAtual&&(currentForce=window.opener.sharedState.forcaAtual/9.81,isConnected=!0,isGameRunning&&checkHit()):isConnected=!1}catch(e){isConnected=!1}updateDebug()},50)}let gameInterval;function startGame(){isGameRunning||(isGameRunning=!0,notePosition=-60,gameInterval=setInterval(()=>{isGameRunning&&(notePosition+=GAME_CONFIG.noteSpeed,beatNote.style.left=notePosition+"px",notePosition>window.innerWidth&&(notePosition=-60,Date.now()-lastHitTime>2e3&&(combo=0,updateCombo(),statusElement.textContent="‚ùå Perdeu o ritmo!")))},16),statusElement.textContent="üé∂ Tocando!",debugGame.textContent="‚ñ∂Ô∏è Rodando")}function stopGame(){isGameRunning=!1,clearInterval(gameInterval),statusElement.textContent="‚è∏Ô∏è Pausado",debugGame.textContent="‚è∏Ô∏è Pausado"}function resetGame(){stopGame(),score=0,combo=0,notePosition=-60,updateScore(),updateCombo(),statusElement.textContent="Aperte no ritmo! üé∂",beatNote.style.left="-60px"}function checkHit(){const e=window.innerWidth/2;if(Math.abs(notePosition-e)<100&&currentForce>5){const t=1-Math.abs(notePosition-e)/100,n=Math.abs(currentForce-GAME_CONFIG.targetForce),o=Math.max(0,1-n/GAME_CONFIG.tolerance),a=Math.round(100*t*o);a>0&&(score+=a*(combo+1),combo++,lastHitTime=Date.now(),updateScore(),updateCombo(),a>80?(statusElement.textContent="üåü PERFEITO! +"+a,statusElement.classList.add("perfect")):statusElement.textContent=a>50?"üëç BOM! +"+a:"üòê OK... +"+a,setTimeout(()=>{statusElement.classList.remove("perfect")},500),notePosition=-60)}}function updateScore(){scoreElement.textContent=score}function updateCombo(){comboElement.textContent=combo,combo>0&&(comboElement.style.transform="scale(1.2)",setTimeout(()=>{comboElement.style.transform="scale(1)"},200))}function updateDebug(){debugForce.textContent=currentForce.toFixed(1),debugConnection.textContent=isConnected?"‚úÖ OK":"‚ùå OFF",debugConnection.style.color=isConnected?"#00ff00":"#ff0000"}document.addEventListener("DOMContentLoaded",()=>{console.log("üéµ Beat Smasher iniciado!"),startForcePolling(),debugTarget.textContent=GAME_CONFIG.targetForce})</script>
