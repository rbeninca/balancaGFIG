<!doctype html><html lang=pt-br><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>‚ö° Rea√ß√£o em Cadeia</title><style>*{margin:0;padding:0;box-sizing:border-box}body{font-family:'Arial Black',sans-serif;background:linear-gradient(135deg,#141e30 0,#243b55 100%);color:#fff;height:100vh;display:flex;align-items:center;justify-content:center}.container{width:90%;max-width:1000px;text-align:center}h1{font-size:3rem;margin-bottom:10px;background:linear-gradient(45deg,#00d2ff,#928dab);-webkit-background-clip:text;-webkit-text-fill-color:transparent}.subtitle{font-size:1.1rem;color:#aaa;margin-bottom:20px}.game-area{background:rgba(255,255,255,.05);border-radius:20px;padding:30px;margin:20px 0;border:2px solid rgba(0,210,255,.3)}.targets-container{display:flex;justify-content:space-around;margin:30px 0;gap:10px}.target{width:150px;height:180px;background:rgba(0,0,0,.5);border-radius:15px;border:3px solid #666;display:flex;flex-direction:column;align-items:center;justify-content:center;transition:all .3s;position:relative}.target.active{border-color:#0f0;box-shadow:0 0 30px #0f0;transform:scale(1.1)}.target.hit{border-color:#ff0;background:rgba(255,255,0,.2)}.target.missed{border-color:red;background:rgba(255,0,0,.2)}.target-number{font-size:1rem;color:#aaa;margin-bottom:10px}.target-value{font-size:2.5rem;font-weight:700;margin:10px 0}.target-timer{font-size:1rem;color:#f80;margin-top:10px}.current-force-display{font-size:3rem;margin:20px 0;min-height:60px}.combo-display{font-size:2.5rem;color:#ff0;margin:15px 0}.stats-grid{display:grid;grid-template-columns:repeat(4,1fr);gap:15px;margin:20px 0}.stat-box{background:rgba(0,0,0,.5);padding:15px;border-radius:10px;border:1px solid rgba(255,255,255,.2)}.stat-label{font-size:.8rem;color:#aaa}.stat-value{font-size:2rem;font-weight:700;margin-top:5px}.message{font-size:1.5rem;min-height:50px;margin:15px 0}button{font-size:1.3rem;padding:15px 30px;background:linear-gradient(45deg,#00d2ff,#3a7bd5);color:#fff;border:none;border-radius:10px;cursor:pointer;margin:10px;font-weight:700;transition:all .3s}button:hover{transform:scale(1.05)}button:disabled{background:#666;cursor:not-allowed}.debug{background:rgba(0,0,0,.7);padding:10px;border-radius:5px;font-size:.8rem;margin-top:20px}@keyframes perfect-combo{0%{transform:scale(1)}50%{transform:scale(1.5) rotate(360deg)}100%{transform:scale(1)}}.perfect-animation{animation:perfect-combo 1s ease-out}</style><div class=container><h1>‚ö° REA√á√ÉO EM CADEIA ‚ö°</h1><div class=subtitle>Acerte os alvos em sequ√™ncia o mais r√°pido poss√≠vel!</div><div class=game-area><div class=current-force-display id=forceDisplay>Sua For√ßa: <span style=color:#0f0>0.0 kg</span></div><div class=targets-container id=targetsContainer></div><div class=combo-display id=comboDisplay>COMBO: 0x</div><div class=stats-grid><div class=stat-box><div class=stat-label>PONTOS</div><div class=stat-value id=score style=color:#0f0>0</div></div><div class=stat-box><div class=stat-label>ACERTOS</div><div class=stat-value id=hits style=color:#ff0>0</div></div><div class=stat-box><div class=stat-label>ERROS</div><div class=stat-value id=misses style=color:red>0</div></div><div class=stat-box><div class=stat-label>TEMPO</div><div class=stat-value id=time style=color:#0ff>0.0s</div></div></div><div class=message id=message>Pressione INICIAR para come√ßar!</div></div><div><button onclick=startGame() id=startBtn>‚ñ∂Ô∏è INICIAR</button> <button onclick=resetGame()>üîÑ Resetar</button></div><div class=debug><div>For√ßa: <span id=debugForce>0</span> kg | Alvo: <span id=debugTarget>-</span> kg | Tempo: <span id=debugTimer>-</span>s</div><div>Conex√£o: <span id=debugConnection>Verificando...</span></div></div></div><script>const GAME_CONFIG={targetCount:5,targetTime:3e3,tolerance:5,minForce:10,maxForce:60,comboBonus:10};let currentForce=0,isConnected=!1,isPlaying=!1,targets=[],currentTargetIndex=0,score=0,hits=0,misses=0,combo=0,startTime=0,targetTimer=0,timerInterval=null,hasAttempted=!1;const targetsContainer=document.getElementById("targetsContainer"),forceDisplay=document.getElementById("forceDisplay"),comboDisplay=document.getElementById("comboDisplay"),scoreDisplay=document.getElementById("score"),hitsDisplay=document.getElementById("hits"),missesDisplay=document.getElementById("misses"),timeDisplay=document.getElementById("time"),messageElement=document.getElementById("message"),startBtn=document.getElementById("startBtn"),debugForce=document.getElementById("debugForce"),debugTarget=document.getElementById("debugTarget"),debugTimer=document.getElementById("debugTimer"),debugConnection=document.getElementById("debugConnection");function startForcePolling(){setInterval(()=>{try{window.opener&&window.opener.sharedState?"number"==typeof window.opener.sharedState.forcaAtual&&(currentForce=window.opener.sharedState.forcaAtual/9.81,isConnected=!0,isPlaying&&checkHit()):isConnected=!1}catch(e){isConnected=!1}updateForceDisplay(),updateDebug()},50)}function createTargets(){targetsContainer.innerHTML="",targets=[];for(let e=0;e<GAME_CONFIG.targetCount;e++){const t=Math.round(Math.random()*(GAME_CONFIG.maxForce-GAME_CONFIG.minForce)+GAME_CONFIG.minForce),n=document.createElement("div");n.className="target",n.innerHTML=`\n                    <div class="target-number">ALVO ${e+1}</div>\n                    <div class="target-value">${t} kg</div>\n                    <div class="target-timer">---</div>\n                `,targetsContainer.appendChild(n),targets.push({value:t,element:n,hit:!1})}}function startGame(){isPlaying||(isPlaying=!0,startBtn.disabled=!0,currentTargetIndex=0,score=0,hits=0,misses=0,combo=0,startTime=Date.now(),hasAttempted=!1,createTargets(),activateTarget(0),startTimer(),messageElement.textContent="‚ö° Acerte os alvos rapidamente!",messageElement.style.color="#00ff00",updateStats())}function activateTarget(e){if(e>=targets.length)return void gameComplete();targets.forEach(e=>e.element.classList.remove("active")),targets[e].element.classList.add("active"),targetTimer=GAME_CONFIG.targetTime/1e3,hasAttempted=!1;const t=targets[e].element.querySelector(".target-timer"),n=setInterval(()=>{targetTimer-=.1,t.textContent=targetTimer.toFixed(1)+"s",targetTimer<=0&&(clearInterval(n),missTarget())},100);targets[e].timerInterval=n}function checkHit(){if(!isPlaying||hasAttempted||currentTargetIndex>=targets.length)return;const e=targets[currentTargetIndex],t=Math.abs(currentForce-e.value);currentForce>5&&(hasAttempted=!0,clearInterval(e.timerInterval),t<=GAME_CONFIG.tolerance?hitTarget():missTarget())}function hitTarget(){const e=targets[currentTargetIndex];hits++,combo++;const t=100+Math.max(0,Math.floor(10*targetTimer))+combo*GAME_CONFIG.comboBonus;score+=t,e.element.classList.remove("active"),e.element.classList.add("hit"),e.hit=!0,messageElement.textContent=`‚úÖ ACERTOU! +${t} pontos (Combo ${combo}x)`,messageElement.style.color="#00ff00",combo>=GAME_CONFIG.targetCount&&(messageElement.classList.add("perfect-animation"),setTimeout(()=>{messageElement.classList.remove("perfect-animation")},1e3)),updateStats(),setTimeout(()=>{currentTargetIndex++,activateTarget(currentTargetIndex)},500)}function missTarget(){const e=targets[currentTargetIndex];misses++,combo=0,e.element.classList.remove("active"),e.element.classList.add("missed");const t=Math.abs(currentForce-e.value),n=currentForce>e.value?"MUITA":"POUCA";messageElement.textContent=`‚ùå ERROU! ${n} for√ßa (${t.toFixed(1)} kg de diferen√ßa)`,messageElement.style.color="#ff0000",updateStats(),setTimeout(()=>{currentTargetIndex++,activateTarget(currentTargetIndex)},500)}function gameComplete(){isPlaying=!1,startBtn.disabled=!1,clearInterval(timerInterval);const e=((Date.now()-startTime)/1e3).toFixed(2),t=targets.length>0?(hits/targets.length*100).toFixed(0):0;let n="";hits===targets.length?(n=`üèÜ PERFEITO! Tempo: ${e}s | Pontos: ${score}`,messageElement.style.color="#ffff00"):(n=`‚úÖ COMPLETO! Acertos: ${hits}/${targets.length} (${t}%) | Tempo: ${e}s`,messageElement.style.color="#00ff00"),messageElement.textContent=n}function startTimer(){timerInterval=setInterval(()=>{if(isPlaying){const e=((Date.now()-startTime)/1e3).toFixed(1);timeDisplay.textContent=e+"s"}},100)}function updateForceDisplay(){forceDisplay.innerHTML=`Sua For√ßa: <span style="color: ${getForceColor()};">${currentForce.toFixed(1)} kg</span>`}function getForceColor(){if(!isPlaying||currentTargetIndex>=targets.length)return"#00ff00";const e=targets[currentTargetIndex],t=Math.abs(currentForce-e.value);return t<=GAME_CONFIG.tolerance?"#00ff00":t<=2*GAME_CONFIG.tolerance?"#ffff00":"#ff8800"}function updateStats(){scoreDisplay.textContent=score,hitsDisplay.textContent=hits,missesDisplay.textContent=misses,comboDisplay.textContent=`COMBO: ${combo}x`,combo>0&&(comboDisplay.style.transform="scale(1.2)",setTimeout(()=>{comboDisplay.style.transform="scale(1)"},200))}function updateDebug(){debugForce.textContent=currentForce.toFixed(1),debugTarget.textContent=currentTargetIndex<targets.length?targets[currentTargetIndex].value:"-",debugTimer.textContent=targetTimer.toFixed(1),debugConnection.textContent=isConnected?"‚úÖ OK":"‚ùå OFF",debugConnection.style.color=isConnected?"#00ff00":"#ff0000"}function resetGame(){isPlaying=!1,startBtn.disabled=!1,clearInterval(timerInterval),targets.forEach(e=>{e.timerInterval&&clearInterval(e.timerInterval)}),score=0,hits=0,misses=0,combo=0,currentTargetIndex=0,createTargets(),updateStats(),timeDisplay.textContent="0.0s",messageElement.textContent="Pressione INICIAR para come√ßar!",messageElement.style.color="#ffffff"}document.addEventListener("DOMContentLoaded",()=>{console.log("‚ö° Rea√ß√£o em Cadeia iniciada!"),startForcePolling(),createTargets()})</script>
